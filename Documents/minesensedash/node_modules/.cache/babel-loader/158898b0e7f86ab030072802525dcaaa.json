{"ast":null,"code":"import _classCallCheck from\"/Users/tanmaymoharana/Documents/projects/industrial/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tanmaymoharana/Documents/projects/industrial/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import firebase from\"firebase/app\";// Add the Firebase products that you want to use\nimport\"firebase/auth\";import\"firebase/firestore\";var FirebaseAuthBackend=/*#__PURE__*/function(){function FirebaseAuthBackend(firebaseConfig){var _this=this;_classCallCheck(this,FirebaseAuthBackend);this.registerUser=function(email,password){return new Promise(function(resolve,reject){firebase.auth().createUserWithEmailAndPassword(email,password).then(function(user){resolve(firebase.auth().currentUser);},function(error){reject(_this._handleError(error));});});};this.loginUser=function(email,password){return new Promise(function(resolve,reject){firebase.auth().signInWithEmailAndPassword(email,password).then(function(user){resolve(firebase.auth().currentUser);},function(error){reject(_this._handleError(error));});});};this.forgetPassword=function(email){return new Promise(function(resolve,reject){firebase.auth().sendPasswordResetEmail(email,{url:window.location.protocol+\"//\"+window.location.host+\"/login\"}).then(function(){resolve(true);}).catch(function(error){reject(_this._handleError(error));});});};this.logout=function(){return new Promise(function(resolve,reject){firebase.auth().signOut().then(function(){resolve(true);}).catch(function(error){reject(_this._handleError(error));});});};this.setLoggeedInUser=function(user){localStorage.setItem(\"authUser\",JSON.stringify(user));};this.getAuthenticatedUser=function(){if(!localStorage.getItem(\"authUser\"))return null;return JSON.parse(localStorage.getItem(\"authUser\"));};if(firebaseConfig){// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);firebase.auth().onAuthStateChanged(function(user){if(user){localStorage.setItem(\"authUser\",JSON.stringify(user));}else{localStorage.removeItem(\"authUser\");}});}}/**\r\n   * Registers the user with given details\r\n   */_createClass(FirebaseAuthBackend,[{key:\"_handleError\",/**\r\n   * Handle the error\r\n   * @param {*} error\r\n   */value:function _handleError(error){// var errorCode = error.code;\nvar errorMessage=error.message;return errorMessage;}}]);return FirebaseAuthBackend;}();var _fireBaseBackend=null;/**\r\n * Initilize the backend\r\n * @param {*} config\r\n */var initFirebaseBackend=function initFirebaseBackend(config){if(!_fireBaseBackend){_fireBaseBackend=new FirebaseAuthBackend(config);}return _fireBaseBackend;};/**\r\n * Returns the firebase backend\r\n */var getFirebaseBackend=function getFirebaseBackend(){return _fireBaseBackend;};export{initFirebaseBackend,getFirebaseBackend};","map":{"version":3,"sources":["/Users/tanmaymoharana/Documents/projects/industrial/dashboard/src/helpers/firebase_helper.js"],"names":["firebase","FirebaseAuthBackend","firebaseConfig","registerUser","email","password","Promise","resolve","reject","auth","createUserWithEmailAndPassword","then","user","currentUser","error","_handleError","loginUser","signInWithEmailAndPassword","forgetPassword","sendPasswordResetEmail","url","window","location","protocol","host","catch","logout","signOut","setLoggeedInUser","localStorage","setItem","JSON","stringify","getAuthenticatedUser","getItem","parse","initializeApp","onAuthStateChanged","removeItem","errorMessage","message","_fireBaseBackend","initFirebaseBackend","config","getFirebaseBackend"],"mappings":"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","sourcesContent":["import firebase from \"firebase/app\";\r\n\r\n// Add the Firebase products that you want to use\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\n\r\nclass FirebaseAuthBackend {\r\n  constructor(firebaseConfig) {\r\n    if (firebaseConfig) {\r\n      // Initialize Firebase\r\n      firebase.initializeApp(firebaseConfig);\r\n      firebase.auth().onAuthStateChanged(user => {\r\n        if (user) {\r\n          localStorage.setItem(\"authUser\", JSON.stringify(user));\r\n        } else {\r\n          localStorage.removeItem(\"authUser\");\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Registers the user with given details\r\n   */\r\n  registerUser = (email, password) => {\r\n    return new Promise((resolve, reject) => {\r\n      firebase\r\n        .auth()\r\n        .createUserWithEmailAndPassword(email, password)\r\n        .then(\r\n          user => {\r\n            resolve(firebase.auth().currentUser);\r\n          },\r\n          error => {\r\n            reject(this._handleError(error));\r\n          }\r\n        );\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Login user with given details\r\n   */\r\n  loginUser = (email, password) => {\r\n    return new Promise((resolve, reject) => {\r\n      firebase\r\n        .auth()\r\n        .signInWithEmailAndPassword(email, password)\r\n        .then(\r\n          user => {\r\n            resolve(firebase.auth().currentUser);\r\n          },\r\n          error => {\r\n            reject(this._handleError(error));\r\n          }\r\n        );\r\n    });\r\n  };\r\n\r\n  /**\r\n   * forget Password user with given details\r\n   */\r\n  forgetPassword = email => {\r\n    return new Promise((resolve, reject) => {\r\n      firebase\r\n        .auth()\r\n        .sendPasswordResetEmail(email, {\r\n          url: window.location.protocol + \"//\" + window.location.host + \"/login\"\r\n        })\r\n        .then(() => {\r\n          resolve(true);\r\n        })\r\n        .catch(error => {\r\n          reject(this._handleError(error));\r\n        });\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Logout the user\r\n   */\r\n  logout = () => {\r\n    return new Promise((resolve, reject) => {\r\n      firebase\r\n        .auth()\r\n        .signOut()\r\n        .then(() => {\r\n          resolve(true);\r\n        })\r\n        .catch(error => {\r\n          reject(this._handleError(error));\r\n        });\r\n    });\r\n  };\r\n\r\n  setLoggeedInUser = user => {\r\n    localStorage.setItem(\"authUser\", JSON.stringify(user));\r\n  };\r\n\r\n  /**\r\n   * Returns the authenticated user\r\n   */\r\n  getAuthenticatedUser = () => {\r\n    if (!localStorage.getItem(\"authUser\")) return null;\r\n    return JSON.parse(localStorage.getItem(\"authUser\"));\r\n  };\r\n\r\n  /**\r\n   * Handle the error\r\n   * @param {*} error\r\n   */\r\n  _handleError(error) {\r\n    // var errorCode = error.code;\r\n    var errorMessage = error.message;\r\n    return errorMessage;\r\n  }\r\n}\r\n\r\nlet _fireBaseBackend = null;\r\n\r\n/**\r\n * Initilize the backend\r\n * @param {*} config\r\n */\r\nconst initFirebaseBackend = config => {\r\n  if (!_fireBaseBackend) {\r\n    _fireBaseBackend = new FirebaseAuthBackend(config);\r\n  }\r\n  return _fireBaseBackend;\r\n};\r\n\r\n/**\r\n * Returns the firebase backend\r\n */\r\nconst getFirebaseBackend = () => {\r\n  return _fireBaseBackend;\r\n};\r\n\r\nexport { initFirebaseBackend, getFirebaseBackend };\r\n"]},"metadata":{},"sourceType":"module"}