{"ast":null,"code":"import _classCallCheck from\"/Users/tanmaymoharana/Documents/projects/industrial/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tanmaymoharana/Documents/projects/industrial/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/tanmaymoharana/Documents/projects/industrial/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tanmaymoharana/Documents/projects/industrial/dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';var Knob=/*#__PURE__*/function(_React$Component){_inherits(Knob,_React$Component);var _super=_createSuper(Knob);function Knob(props){var _this;_classCallCheck(this,Knob);_this=_super.call(this,props);_this.getArcToValue=function(v){var startAngle;var endAngle;var angle=!_this.props.log?(v-_this.props.min)*_this.angleArc/(_this.props.max-_this.props.min):Math.log(Math.pow(v/_this.props.min,_this.angleArc))/Math.log(_this.props.max/_this.props.min);if(!_this.props.clockwise){startAngle=_this.endAngle+0.00001;endAngle=startAngle-angle-0.00001;}else{startAngle=_this.startAngle-0.00001;endAngle=startAngle+angle+0.00001;}if(_this.props.cursor){startAngle=endAngle-_this.cursorExt;endAngle+=_this.cursorExt;}return{startAngle:startAngle,endAngle:endAngle,acw:!_this.props.clockwise&&!_this.props.cursor};};_this.getCanvasScale=function(ctx){var devicePixelRatio=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI||// IE10\n1;var backingStoreRatio=ctx.webkitBackingStorePixelRatio||1;return devicePixelRatio/backingStoreRatio;};_this.coerceToStep=function(v){var val=!_this.props.log?~~((v<0?-0.5:0.5)+v/_this.props.step)*_this.props.step:Math.pow(_this.props.step,~~((Math.abs(v)<1?-0.5:0.5)+Math.log(v)/Math.log(_this.props.step)));val=Math.max(Math.min(val,_this.props.max),_this.props.min);if(isNaN(val)){val=0;}return Math.round(val*1000)/1000;};_this.eventToValue=function(e){var bounds=_this.canvasRef.getBoundingClientRect();var x=e.clientX-bounds.left;var y=e.clientY-bounds.top;var a=Math.atan2(x-_this.w/2,_this.w/2-y)-_this.angleOffset;if(!_this.props.clockwise){a=_this.angleArc-a-2*Math.PI;}if(_this.angleArc!==Math.PI*2&&a<0&&a>-0.5){a=0;}else if(a<0){a+=Math.PI*2;}var val=!_this.props.log?a*(_this.props.max-_this.props.min)/_this.angleArc+_this.props.min:Math.pow(_this.props.max/_this.props.min,a/_this.angleArc)*_this.props.min;return _this.coerceToStep(val);};_this.handleMouseDown=function(e){_this.props.onChange(_this.eventToValue(e));document.addEventListener('mousemove',_this.handleMouseMove);document.addEventListener('mouseup',_this.handleMouseUp);document.addEventListener('keyup',_this.handleEsc);};_this.handleMouseMove=function(e){e.preventDefault();_this.props.onChange(_this.eventToValue(e));};_this.handleMouseUp=function(e){_this.props.onChangeEnd(_this.eventToValue(e));document.removeEventListener('mousemove',_this.handleMouseMove);document.removeEventListener('mouseup',_this.handleMouseUp);document.removeEventListener('keyup',_this.handleEsc);};_this.handleTouchStart=function(e){e.preventDefault();_this.touchIndex=e.targetTouches.length-1;_this.props.onChange(_this.eventToValue(e.targetTouches[_this.touchIndex]));document.addEventListener('touchmove',_this.handleTouchMove,{passive:false});document.addEventListener('touchend',_this.handleTouchEnd);document.addEventListener('touchcancel',_this.handleTouchEnd);};_this.handleTouchMove=function(e){e.preventDefault();_this.props.onChange(_this.eventToValue(e.targetTouches[_this.touchIndex]));};_this.handleTouchEnd=function(e){_this.props.onChangeEnd(_this.eventToValue(e));document.removeEventListener('touchmove',_this.handleTouchMove);document.removeEventListener('touchend',_this.handleTouchEnd);document.removeEventListener('touchcancel',_this.handleTouchEnd);};_this.handleEsc=function(e){if(e.keyCode===27){e.preventDefault();_this.handleMouseUp();}};_this.handleTextInput=function(e){var val=Math.max(Math.min(+e.target.value,_this.props.max),_this.props.min)||_this.props.min;_this.props.onChange(val);};_this.handleWheel=function(e){e.preventDefault();if(e.deltaX>0||e.deltaY>0){_this.props.onChange(_this.coerceToStep(!_this.props.log?_this.props.value+_this.props.step:_this.props.value*_this.props.step));}else if(e.deltaX<0||e.deltaY<0){_this.props.onChange(_this.coerceToStep(!_this.props.log?_this.props.value-_this.props.step:_this.props.value/_this.props.step));}};_this.handleArrowKey=function(e){if(e.keyCode===37||e.keyCode===40){e.preventDefault();_this.props.onChange(_this.coerceToStep(!_this.props.log?_this.props.value-_this.props.step:_this.props.value/_this.props.step));}else if(e.keyCode===38||e.keyCode===39){e.preventDefault();_this.props.onChange(_this.coerceToStep(!_this.props.log?_this.props.value+_this.props.step:_this.props.value*_this.props.step));}};_this.inputStyle=function(){return{width:\"\".concat(_this.w/2+4>>0,\"px\"),height:\"\".concat(_this.w/3>>0,\"px\"),position:'absolute',verticalAlign:'middle',marginTop:\"\".concat(_this.w/3>>0,\"px\"),marginLeft:\"-\".concat(_this.w*3/4+2>>0,\"px\"),border:0,background:'none',font:\"\".concat(_this.props.fontWeight,\" \").concat(_this.w/_this.digits>>0,\"px \").concat(_this.props.font),textAlign:'center',color:_this.props.inputColor||_this.props.fgColor,padding:'0px',WebkitAppearance:'none'};};_this.renderCenter=function(){var _this$props=_this.props,displayCustom=_this$props.displayCustom,displayInput=_this$props.displayInput,disableTextInput=_this$props.disableTextInput,readOnly=_this$props.readOnly,value=_this$props.value;if(displayInput){return/*#__PURE__*/React.createElement(\"input\",{style:_this.inputStyle(),type:\"text\",value:value,onChange:_this.handleTextInput,onKeyDown:_this.handleArrowKey,readOnly:readOnly||disableTextInput});}else if(displayCustom&&typeof displayCustom==='function'){return displayCustom();}return null;};_this.w=_this.props.width||200;_this.h=_this.props.height||_this.w;_this.cursorExt=_this.props.cursor===true?0.3:_this.props.cursor/100;_this.angleArc=_this.props.angleArc*Math.PI/180;_this.angleOffset=_this.props.angleOffset*Math.PI/180;_this.startAngle=1.5*Math.PI+_this.angleOffset;_this.endAngle=1.5*Math.PI+_this.angleOffset+_this.angleArc;_this.digits=Math.max(String(Math.abs(_this.props.min)).length,String(Math.abs(_this.props.max)).length,2)+2;return _this;}_createClass(Knob,[{key:\"componentDidMount\",value:function componentDidMount(){this.drawCanvas();if(!this.props.readOnly){this.canvasRef.addEventListener('touchstart',this.handleTouchStart,{passive:false});}}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){if(nextProps.width&&this.w!==nextProps.width){this.w=nextProps.width;}if(nextProps.height&&this.h!==nextProps.height){this.h=nextProps.height;}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.drawCanvas();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.canvasRef.removeEventListener('touchstart',this.handleTouchStart);}},{key:\"drawCanvas\",value:function drawCanvas(){var ctx=this.canvasRef.getContext('2d');var scale=this.getCanvasScale(ctx);this.canvasRef.width=this.w*scale;// clears the canvas\nthis.canvasRef.height=this.h*scale;ctx.scale(scale,scale);this.xy=this.w/2;// coordinates of canvas center\nthis.lineWidth=this.xy*this.props.thickness;this.radius=this.xy-this.lineWidth/2;ctx.lineWidth=this.lineWidth;ctx.lineCap=this.props.lineCap;// background arc\nctx.beginPath();ctx.strokeStyle=this.props.bgColor;ctx.arc(this.xy,this.xy,this.radius,this.endAngle-0.00001,this.startAngle+0.00001,true);ctx.stroke();// foreground arc\nvar a=this.getArcToValue(this.props.value);ctx.beginPath();ctx.strokeStyle=this.props.fgColor;ctx.arc(this.xy,this.xy,this.radius,a.startAngle,a.endAngle,a.acw);ctx.stroke();}},{key:\"render\",value:function render(){var _this2=this;var _this$props2=this.props,canvasClassName=_this$props2.canvasClassName,className=_this$props2.className,disableMouseWheel=_this$props2.disableMouseWheel,readOnly=_this$props2.readOnly,title=_this$props2.title,value=_this$props2.value;return/*#__PURE__*/React.createElement(\"div\",{className:className,style:{width:this.w,height:this.h,display:'inline-block'},onWheel:readOnly||disableMouseWheel?null:this.handleWheel},/*#__PURE__*/React.createElement(\"canvas\",{ref:function ref(_ref){_this2.canvasRef=_ref;},className:canvasClassName,style:{width:'100%',height:'100%'},onMouseDown:readOnly?null:this.handleMouseDown,title:title?\"\".concat(title,\": \").concat(value):value}),this.renderCenter());}}]);return Knob;}(React.Component);Knob.defaultProps={onChangeEnd:function onChangeEnd(){},min:0,max:100,step:1,log:false,width:200,height:200,thickness:0.35,lineCap:'butt',bgColor:'#EEE',fgColor:'#EA2',inputColor:'',font:'Arial',fontWeight:'bold',clockwise:true,cursor:false,stopper:true,readOnly:false,disableTextInput:false,displayInput:true,angleArc:360,angleOffset:0,disableMouseWheel:false,className:null,canvasClassName:null};export default Knob;","map":{"version":3,"sources":["/Users/tanmaymoharana/Documents/projects/industrial/dashboard/src/pages/AllCharts/knob/knob.js"],"names":["React","Knob","props","getArcToValue","v","startAngle","endAngle","angle","log","min","angleArc","max","Math","pow","clockwise","cursor","cursorExt","acw","getCanvasScale","ctx","devicePixelRatio","window","screen","deviceXDPI","logicalXDPI","backingStoreRatio","webkitBackingStorePixelRatio","coerceToStep","val","step","abs","isNaN","round","eventToValue","e","bounds","canvasRef","getBoundingClientRect","x","clientX","left","y","clientY","top","a","atan2","w","angleOffset","PI","handleMouseDown","onChange","document","addEventListener","handleMouseMove","handleMouseUp","handleEsc","preventDefault","onChangeEnd","removeEventListener","handleTouchStart","touchIndex","targetTouches","length","handleTouchMove","passive","handleTouchEnd","keyCode","handleTextInput","target","value","handleWheel","deltaX","deltaY","handleArrowKey","inputStyle","width","height","position","verticalAlign","marginTop","marginLeft","border","background","font","fontWeight","digits","textAlign","color","inputColor","fgColor","padding","WebkitAppearance","renderCenter","displayCustom","displayInput","disableTextInput","readOnly","h","String","drawCanvas","nextProps","getContext","scale","xy","lineWidth","thickness","radius","lineCap","beginPath","strokeStyle","bgColor","arc","stroke","canvasClassName","className","disableMouseWheel","title","display","ref","Component","defaultProps","stopper"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Knob extends React.Component {\r\n    static propTypes = {\r\n        value: PropTypes.number.isRequired,\r\n        onChange: PropTypes.func.isRequired,\r\n        onChangeEnd: PropTypes.func,\r\n        min: PropTypes.number,\r\n        max: PropTypes.number,\r\n        step: PropTypes.number,\r\n        log: PropTypes.bool,\r\n        width: PropTypes.number,\r\n        height: PropTypes.number,\r\n        thickness: PropTypes.number,\r\n        lineCap: PropTypes.oneOf(['butt', 'round']),\r\n        bgColor: PropTypes.string,\r\n        fgColor: PropTypes.string,\r\n        inputColor: PropTypes.string,\r\n        font: PropTypes.string,\r\n        fontWeight: PropTypes.string,\r\n        clockwise: PropTypes.bool,\r\n        cursor: PropTypes.oneOfType([\r\n            PropTypes.number,\r\n            PropTypes.bool,\r\n        ]),\r\n        stopper: PropTypes.bool,\r\n        readOnly: PropTypes.bool,\r\n        disableTextInput: PropTypes.bool,\r\n        displayInput: PropTypes.bool,\r\n        displayCustom: PropTypes.func,\r\n        angleArc: PropTypes.number,\r\n        angleOffset: PropTypes.number,\r\n        disableMouseWheel: PropTypes.bool,\r\n        title: PropTypes.string,\r\n        className: PropTypes.string,\r\n        canvasClassName: PropTypes.string,\r\n    };\r\n\r\n    static defaultProps = {\r\n        onChangeEnd: () => { },\r\n        min: 0,\r\n        max: 100,\r\n        step: 1,\r\n        log: false,\r\n        width: 200,\r\n        height: 200,\r\n        thickness: 0.35,\r\n        lineCap: 'butt',\r\n        bgColor: '#EEE',\r\n        fgColor: '#EA2',\r\n        inputColor: '',\r\n        font: 'Arial',\r\n        fontWeight: 'bold',\r\n        clockwise: true,\r\n        cursor: false,\r\n        stopper: true,\r\n        readOnly: false,\r\n        disableTextInput: false,\r\n        displayInput: true,\r\n        angleArc: 360,\r\n        angleOffset: 0,\r\n        disableMouseWheel: false,\r\n        className: null,\r\n        canvasClassName: null,\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.w = this.props.width || 200;\r\n        this.h = this.props.height || this.w;\r\n        this.cursorExt = this.props.cursor === true ? 0.3 : this.props.cursor / 100;\r\n        this.angleArc = this.props.angleArc * Math.PI / 180;\r\n        this.angleOffset = this.props.angleOffset * Math.PI / 180;\r\n        this.startAngle = (1.5 * Math.PI) + this.angleOffset;\r\n        this.endAngle = (1.5 * Math.PI) + this.angleOffset + this.angleArc;\r\n        this.digits = Math.max(\r\n            String(Math.abs(this.props.min)).length,\r\n            String(Math.abs(this.props.max)).length,\r\n            2\r\n        ) + 2;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.drawCanvas();\r\n        if (!this.props.readOnly) {\r\n            this.canvasRef.addEventListener('touchstart', this.handleTouchStart, { passive: false });\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.width && this.w !== nextProps.width) {\r\n            this.w = nextProps.width;\r\n        }\r\n        if (nextProps.height && this.h !== nextProps.height) {\r\n            this.h = nextProps.height;\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.drawCanvas();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.canvasRef.removeEventListener('touchstart', this.handleTouchStart);\r\n    }\r\n\r\n    getArcToValue = (v) => {\r\n        let startAngle;\r\n        let endAngle;\r\n        const angle = !this.props.log\r\n            ? ((v - this.props.min) * this.angleArc) / (this.props.max - this.props.min)\r\n            : Math.log(Math.pow((v / this.props.min), this.angleArc)) / Math.log(this.props.max / this.props.min);\r\n        if (!this.props.clockwise) {\r\n            startAngle = this.endAngle + 0.00001;\r\n            endAngle = startAngle - angle - 0.00001;\r\n        } else {\r\n            startAngle = this.startAngle - 0.00001;\r\n            endAngle = startAngle + angle + 0.00001;\r\n        }\r\n        if (this.props.cursor) {\r\n            startAngle = endAngle - this.cursorExt;\r\n            endAngle += this.cursorExt;\r\n        }\r\n        return {\r\n            startAngle,\r\n            endAngle,\r\n            acw: !this.props.clockwise && !this.props.cursor,\r\n        };\r\n    };\r\n\r\n    // Calculate ratio to scale canvas to avoid blurriness on HiDPI devices\r\n    getCanvasScale = (ctx) => {\r\n        const devicePixelRatio = window.devicePixelRatio ||\r\n            window.screen.deviceXDPI / window.screen.logicalXDPI || // IE10\r\n            1;\r\n        const backingStoreRatio = ctx.webkitBackingStorePixelRatio || 1;\r\n        return devicePixelRatio / backingStoreRatio;\r\n    };\r\n\r\n    coerceToStep = (v) => {\r\n        let val = !this.props.log\r\n            ? (~~(((v < 0) ? -0.5 : 0.5) + (v / this.props.step))) * this.props.step\r\n            : Math.pow(this.props.step, ~~(((Math.abs(v) < 1) ? -0.5 : 0.5) + (Math.log(v) / Math.log(this.props.step))));\r\n        val = Math.max(Math.min(val, this.props.max), this.props.min);\r\n        if (isNaN(val)) { val = 0; }\r\n        return Math.round(val * 1000) / 1000;\r\n    };\r\n\r\n    eventToValue = (e) => {\r\n        const bounds = this.canvasRef.getBoundingClientRect();\r\n        const x = e.clientX - bounds.left;\r\n        const y = e.clientY - bounds.top;\r\n        let a = Math.atan2(x - (this.w / 2), (this.w / 2) - y) - this.angleOffset;\r\n        if (!this.props.clockwise) {\r\n            a = this.angleArc - a - (2 * Math.PI);\r\n        }\r\n        if (this.angleArc !== Math.PI * 2 && (a < 0) && (a > -0.5)) {\r\n            a = 0;\r\n        } else if (a < 0) {\r\n            a += Math.PI * 2;\r\n        }\r\n        const val = !this.props.log\r\n            ? (a * (this.props.max - this.props.min) / this.angleArc) + this.props.min\r\n            : Math.pow(this.props.max / this.props.min, a / this.angleArc) * this.props.min;\r\n        return this.coerceToStep(val);\r\n    };\r\n\r\n    handleMouseDown = (e) => {\r\n        this.props.onChange(this.eventToValue(e));\r\n        document.addEventListener('mousemove', this.handleMouseMove);\r\n        document.addEventListener('mouseup', this.handleMouseUp);\r\n        document.addEventListener('keyup', this.handleEsc);\r\n    };\r\n\r\n    handleMouseMove = (e) => {\r\n        e.preventDefault();\r\n        this.props.onChange(this.eventToValue(e));\r\n    };\r\n\r\n    handleMouseUp = (e) => {\r\n        this.props.onChangeEnd(this.eventToValue(e));\r\n        document.removeEventListener('mousemove', this.handleMouseMove);\r\n        document.removeEventListener('mouseup', this.handleMouseUp);\r\n        document.removeEventListener('keyup', this.handleEsc);\r\n    };\r\n\r\n    handleTouchStart = (e) => {\r\n        e.preventDefault();\r\n        this.touchIndex = e.targetTouches.length - 1;\r\n        this.props.onChange(this.eventToValue(e.targetTouches[this.touchIndex]));\r\n        document.addEventListener('touchmove', this.handleTouchMove, { passive: false });\r\n        document.addEventListener('touchend', this.handleTouchEnd);\r\n        document.addEventListener('touchcancel', this.handleTouchEnd);\r\n    };\r\n\r\n    handleTouchMove = (e) => {\r\n        e.preventDefault();\r\n        this.props.onChange(this.eventToValue(e.targetTouches[this.touchIndex]));\r\n    };\r\n\r\n    handleTouchEnd = (e) => {\r\n        this.props.onChangeEnd(this.eventToValue(e));\r\n        document.removeEventListener('touchmove', this.handleTouchMove);\r\n        document.removeEventListener('touchend', this.handleTouchEnd);\r\n        document.removeEventListener('touchcancel', this.handleTouchEnd);\r\n    };\r\n\r\n    handleEsc = (e) => {\r\n        if (e.keyCode === 27) {\r\n            e.preventDefault();\r\n            this.handleMouseUp();\r\n        }\r\n    };\r\n\r\n    handleTextInput = (e) => {\r\n        const val = Math.max(Math.min(+e.target.value, this.props.max), this.props.min) || this.props.min;\r\n        this.props.onChange(val);\r\n    };\r\n\r\n    handleWheel = (e) => {\r\n        e.preventDefault();\r\n        if (e.deltaX > 0 || e.deltaY > 0) {\r\n            this.props.onChange(this.coerceToStep(\r\n                !this.props.log\r\n                    ? this.props.value + this.props.step\r\n                    : this.props.value * this.props.step\r\n            ));\r\n        } else if (e.deltaX < 0 || e.deltaY < 0) {\r\n            this.props.onChange(this.coerceToStep(\r\n                !this.props.log\r\n                    ? this.props.value - this.props.step\r\n                    : this.props.value / this.props.step\r\n            ));\r\n        }\r\n    };\r\n\r\n    handleArrowKey = (e) => {\r\n        if (e.keyCode === 37 || e.keyCode === 40) {\r\n            e.preventDefault();\r\n            this.props.onChange(this.coerceToStep(\r\n                !this.props.log\r\n                    ? this.props.value - this.props.step\r\n                    : this.props.value / this.props.step\r\n            ));\r\n        } else if (e.keyCode === 38 || e.keyCode === 39) {\r\n            e.preventDefault();\r\n            this.props.onChange(this.coerceToStep(\r\n                !this.props.log\r\n                    ? this.props.value + this.props.step\r\n                    : this.props.value * this.props.step\r\n            ));\r\n        }\r\n    };\r\n\r\n    inputStyle = () => ({\r\n        width: `${((this.w / 2) + 4) >> 0}px`,\r\n        height: `${(this.w / 3) >> 0}px`,\r\n        position: 'absolute',\r\n        verticalAlign: 'middle',\r\n        marginTop: `${(this.w / 3) >> 0}px`,\r\n        marginLeft: `-${((this.w * 3 / 4) + 2) >> 0}px`,\r\n        border: 0,\r\n        background: 'none',\r\n        font: `${this.props.fontWeight} ${(this.w / this.digits) >> 0}px ${this.props.font}`,\r\n        textAlign: 'center',\r\n        color: this.props.inputColor || this.props.fgColor,\r\n        padding: '0px',\r\n        WebkitAppearance: 'none',\r\n    });\r\n\r\n    drawCanvas() {\r\n        const ctx = this.canvasRef.getContext('2d');\r\n        const scale = this.getCanvasScale(ctx);\r\n        this.canvasRef.width = this.w * scale; // clears the canvas\r\n        this.canvasRef.height = this.h * scale;\r\n        ctx.scale(scale, scale);\r\n        this.xy = this.w / 2; // coordinates of canvas center\r\n        this.lineWidth = this.xy * this.props.thickness;\r\n        this.radius = this.xy - (this.lineWidth / 2);\r\n        ctx.lineWidth = this.lineWidth;\r\n        ctx.lineCap = this.props.lineCap;\r\n        // background arc\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = this.props.bgColor;\r\n        ctx.arc(\r\n            this.xy,\r\n            this.xy,\r\n            this.radius,\r\n            this.endAngle - 0.00001,\r\n            this.startAngle + 0.00001,\r\n            true\r\n        );\r\n        ctx.stroke();\r\n        // foreground arc\r\n        const a = this.getArcToValue(this.props.value);\r\n        ctx.beginPath();\r\n        ctx.strokeStyle = this.props.fgColor;\r\n        ctx.arc(\r\n            this.xy,\r\n            this.xy,\r\n            this.radius,\r\n            a.startAngle,\r\n            a.endAngle,\r\n            a.acw\r\n        );\r\n        ctx.stroke();\r\n    }\r\n\r\n    renderCenter = () => {\r\n        const {\r\n            displayCustom,\r\n            displayInput,\r\n            disableTextInput,\r\n            readOnly,\r\n            value,\r\n        } = this.props;\r\n\r\n        if (displayInput) {\r\n            return (\r\n                <input\r\n                    style={this.inputStyle()}\r\n                    type=\"text\"\r\n                    value={value}\r\n                    onChange={this.handleTextInput}\r\n                    onKeyDown={this.handleArrowKey}\r\n                    readOnly={readOnly || disableTextInput}\r\n                />\r\n            );\r\n        } else if (displayCustom && typeof displayCustom === 'function') {\r\n            return displayCustom();\r\n        }\r\n        return null;\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            canvasClassName,\r\n            className,\r\n            disableMouseWheel,\r\n            readOnly,\r\n            title,\r\n            value,\r\n        } = this.props;\r\n\r\n        return (\r\n            <div\r\n                className={className}\r\n                style={{ width: this.w, height: this.h, display: 'inline-block' }}\r\n                onWheel={readOnly || disableMouseWheel ? null : this.handleWheel}\r\n            >\r\n                <canvas\r\n                    ref={(ref) => { this.canvasRef = ref; }}\r\n                    className={canvasClassName}\r\n                    style={{ width: '100%', height: '100%' }}\r\n                    onMouseDown={readOnly ? null : this.handleMouseDown}\r\n                    title={title ? `${title}: ${value}` : value}\r\n                />\r\n                {this.renderCenter()}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Knob;"]},"metadata":{},"sourceType":"module"}